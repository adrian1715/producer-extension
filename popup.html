<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Producer - Focus Mode</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      html {
        width: 412px;
        height: 522px !important;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui,
          sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        /* padding: 12px 0 0 0; */
        display: flex;
        flex-direction: column;
        height: 522px;
        overflow: hidden;
      }

      .header {
        text-align: center;
        padding: 12px 16px 0 16px;
        flex-shrink: 0;
      }

      .logo-img {
        height: auto;
        max-width: 90%;
        vertical-align: middle;
      }

      .tagline {
        font-size: 12px;
        opacity: 0.8;
      }

      .main-controls {
        text-align: center;
      }

      .status-indicator {
        width: 75px;
        height: 75px;
        border-radius: 50%;
        margin: 0 auto 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 26px;
        border: 3px solid rgba(255, 255, 255, 0.3);
        transition: all 0.3s ease;
      }

      .status-indicator.active {
        background: rgba(46, 204, 113, 0.2);
        border-color: #2ecc71;
        box-shadow: 0 0 20px rgba(46, 204, 113, 0.3);
      }

      .status-indicator.inactive {
        background: rgba(231, 76, 60, 0.2);
        border-color: #e74c3c;
      }

      .session-status {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 12px;
        padding: 14px;
        margin: 12px 0;
        text-align: center;
      }

      .session-status-text {
        color: #e74c3c;
        font-weight: 500;
      }

      .session-timer {
        font-size: 26px;
        font-weight: 700;
        font-family: "Courier New", monospace;
        margin: 8px 0 0 0;
        letter-spacing: 2px;
      }

      .session-label {
        font-size: 12px;
        opacity: 0.8;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      .footer {
        height: 34px !important;
        margin-top: 16px;
      }

      .main-footer {
        display: flex;
        justify-content: space-between;
        /* flex-direction: column; */
        /* gap: 8px; */
      }
      .main-footer div {
        gap: 4px;
      }

      .settings-footer {
        display: flex;
        /* flex-direction: column; */
        justify-content: space-between;
        gap: 8px;
        /* margin: 16px; */
      }

      .btn {
        background: rgba(255, 255, 255, 0.2);
        border: 2px solid rgba(255, 255, 255, 0.3);
        color: white;
        padding: 12px 16px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 14px;
        font-family: inherit;
        font-weight: 500;
        transition: all 0.3s ease;
      }

      .btn:hover {
        background: rgba(255, 255, 255, 0.3);
        transform: translateY(-1px);
      }

      .btn-primary {
        background: rgba(52, 152, 219, 0.3);
        color: white;
      }

      .btn-primary:hover {
        background: rgba(52, 152, 219, 0.5);
        box-shadow: 0 2px 8px rgba(52, 152, 219, 0.3);
      }

      .btn-success {
        background: rgba(46, 204, 113, 0.3);
        color: white;
      }

      .btn-success:hover {
        background: rgba(46, 204, 113, 0.5);
        box-shadow: 0 2px 8px rgba(46, 204, 113, 0.3);
      }

      .btn-danger {
        background: rgba(231, 76, 60, 0.3);
        color: white;
      }

      .btn-danger:hover {
        background: rgba(231, 76, 60, 0.5);
        box-shadow: 0 2px 8px rgba(231, 76, 60, 0.3);
      }

      .btn-small {
        padding: 4px 8px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 12px;
        font-family: inherit;
        font-weight: 500;
        transition: all 0.3s ease;
        backdrop-filter: blur(5px);
        display: inline-flex;
        align-items: center;
        justify-content: center;
      }

      .btn-xsmall {
        padding: 3px 6px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 12px;
        font-family: inherit;
        font-weight: 500;
        transition: all 0.3s ease;
        backdrop-filter: blur(5px);
        display: inline-flex;
        align-items: center;
        justify-content: center;
      }

      .btn-small:hover,
      .btn-xsmall:hover {
        transform: translateY(-1px);
      }

      .btn-squared {
        width: 28px !important;
        height: 28px !important;
      }

      i {
        font-size: 0.9rem;
      }

      #settings {
        display: none;
      }

      #settings .section:first-child {
        margin-top: 0;
      }

      .toggle-btn {
        background: rgba(255, 255, 255, 0.1);
        border: 2px solid rgba(255, 255, 255, 0.3);
        color: white;
        padding: 10px 24px;
        border-radius: 25px;
        font-size: 15px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        backdrop-filter: blur(10px);
      }

      .toggle-btn:hover {
        background: rgba(255, 255, 255, 0.2);
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }

      .toggle-btn.active {
        background: #e74c3c;
        border-color: #e74c3c;
      }

      .toggle-btn.active:hover {
        background: #c0392b;
      }

      .section {
        margin: 12px 0;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 12px;
        padding: 14px;
        backdrop-filter: blur(10px);
      }

      .tab-content > .section:first-child,
      .tab-content > *:first-child > .section:first-child,
      #rules-edit-view > .section:nth-of-type(1),
      #rules-edit-view > .section:nth-of-type(2) {
        margin-top: 0;
      }

      .tab-content > .section:last-child,
      .tab-content > *:last-child > .section:last-child,
      #rules-edit-view > .section:nth-last-of-type(1),
      #rules-edit-view > .section:nth-last-of-type(2) {
        margin-bottom: 0;
      }

      .section-title {
        justify-content: space-between;
        display: flex;
        font-size: 14px;
        font-weight: 600;
        margin-bottom: 10px;
        align-items: center;
        gap: 8px;
      }

      .input-group {
        display: flex;
        gap: 8px;
        margin-bottom: 10px;
      }

      input[type="text"],
      select {
        flex: 1;
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        color: white;
        padding: 8px 12px;
        border-radius: 8px;
        font-size: 13px;
      }

      select option {
        background: rgb(139, 127, 204);
      }

      input[type="text"]::placeholder {
        color: rgba(255, 255, 255, 0.6);
      }

      .rule-item {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 8px;
        padding: 8px 10px;
        margin-bottom: 6px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .rule-info {
        flex: 1;
        text-align: left;
      }

      .rule-url {
        font-size: 12px;
        font-weight: 500;
        margin-bottom: 2px;
      }

      .rule-type {
        font-size: 10px;
        opacity: 0.7;
        text-transform: uppercase;
      }

      .stats {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
      }

      .stat-card {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 8px;
        padding: 10px;
        text-align: center;
      }

      .stat-number {
        font-size: 18px;
        font-weight: 700;
        margin-bottom: 4px;
      }

      .stat-label {
        font-size: 11px;
        opacity: 0.8;
      }

      .empty-state {
        text-align: center;
        opacity: 0.7;
        font-size: 12px;
        padding: 12px;
      }

      .scroll-container {
        overflow-y: auto;
        /* overflow-x: hidden; */
      }

      .scroll-container::-webkit-scrollbar {
        width: 4px;
      }

      .scroll-container::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 2px;
      }

      .scroll-container::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.3);
        border-radius: 2px;
      }

      .flex-row {
        display: flex;
        gap: 6px;
      }

      /* Tab Navigation Styles */
      .content-area {
        flex: 1;
        overflow-y: auto;
        padding: 12px 16px;
        min-height: 0;
        display: flex;
        flex-direction: column;
        /* justify-content: safe center; */
      }

      .tab-content {
        display: none;
        text-align: center;
        animation: fadeIn 0.3s ease;
        /* padding-top: 8px;
        padding-bottom: 12px; */
      }

      .tab-content.active {
        display: block;
      }

      .tab-navigation {
        display: flex;
        justify-content: space-around;
        background: rgba(255, 255, 255, 0.1);
        padding: 12px 16px;
        gap: 4px;
        backdrop-filter: blur(10px);
        flex-shrink: 0;
      }

      .tab-btn {
        flex: 1;
        background: transparent;
        border: none;
        color: rgba(255, 255, 255, 0.6);
        padding: 8px 4px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 10px;
        font-family: inherit;
        font-weight: 500;
        transition: all 0.3s ease;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 4px;
      }

      .tab-btn i {
        font-size: 16px;
      }

      .tab-btn span {
        font-size: 10px;
      }

      .tab-btn:hover {
        background: rgba(255, 255, 255, 0.1);
        color: rgba(255, 255, 255, 0.9);
      }

      .tab-btn.active {
        background: rgba(255, 255, 255, 0.2);
        color: white;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }

      /* Rule Set Item Styles */
      .rule-set-item {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 8px;
        padding: 10px;
        margin-bottom: 8px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        transition: all 0.3s ease;
      }

      /* .rule-set-item:hover {
        background: rgba(255, 255, 255, 0.2);
        opacity: 0.95;
        cursor: pointer;
      } */

      .rule-set-info {
        flex: 1;
        text-align: left;
      }

      .rule-set-name {
        font-size: 14px;
        font-weight: 600;
        margin-bottom: 4px;
      }

      .rule-set-details {
        font-size: 11px;
        opacity: 0.7;
      }

      /* Session Item Styles */
      .session-item {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 8px;
        padding: 10px;
        margin-bottom: 8px;
      }

      .session-header {
        display: flex;
        justify-content: space-between;
        margin-bottom: 4px;
      }

      .session-date {
        font-size: 12px;
        font-weight: 600;
      }

      .session-duration {
        font-size: 12px;
        font-weight: 500;
      }

      .session-details {
        font-size: 11px;
        opacity: 0.7;
      }

      /* Fade in animation */
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Theme Personalization Styles */
      .theme-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 8px;
      }

      .theme-option {
        background: rgba(255, 255, 255, 0.1);
        border: 2px solid rgba(255, 255, 255, 0.2);
        border-radius: 8px;
        padding: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 6px;
        color: white;
        font-size: 11px;
        font-weight: 500;
      }

      .theme-option:hover {
        background: rgba(255, 255, 255, 0.15);
        transform: translateY(-2px);
      }

      .theme-option.active {
        border-color: white;
        background: rgba(255, 255, 255, 0.2);
        box-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
      }

      .theme-preview {
        width: 100%;
        height: 40px;
        border-radius: 6px;
        border: 1px solid rgba(255, 255, 255, 0.3);
      }

      .block-page-preview {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 8px;
        padding: 20px;
        text-align: center;
        border: 2px dashed rgba(255, 255, 255, 0.3);
        min-height: 80px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .preview-content h2 {
        font-size: 16px;
        margin-bottom: 8px;
        font-weight: 600;
      }

      .preview-content p {
        font-size: 12px;
        opacity: 0.9;
        margin: 0;
      }

      /* Theme-specific body backgrounds */
      body.theme-blue {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      }

      body.theme-red {
        background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
      }

      body.theme-green {
        background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
      }

      body.theme-orange {
        background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
      }

      body.theme-purple {
        background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%);
      }

      body.theme-teal {
        background: linear-gradient(135deg, #1abc9c 0%, #16a085 100%);
      }

      /* Block Page Settings Navigation */
      #theme-main-view,
      #block-page-settings-view {
        animation: fadeIn 0.3s ease;
      }

      #backToThemeBtn {
        padding: 6px 10px;
      }

      /* ACTIVE/INACTIVE BUTTONS */
      .btn.active {
        background: rgba(46, 204, 113, 0.3);
        border-color: rgba(46, 204, 113, 0.5);
      }

      .btn.active:hover {
        background: rgba(231, 76, 60, 0.3) !important;
        border-color: rgba(231, 76, 60, 0.5) !important;
      }

      .btn.active:hover i::before {
        content: "\f623" !important; /* bi-x-circle-fill */
      }

      .btn.inactive {
        background: rgba(52, 152, 219, 0.3);
        border-color: rgba(52, 152, 219, 0.5);
      }
    </style>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css"
    />
  </head>
  <body>
    <div class="header">
      <img src="producer-logo.png" alt="Producer logo" class="logo-img" />
    </div>

    <!-- Main Content Area -->
    <div class="content-area">
      <!-- HOME TAB -->
      <div id="tab-home" class="tab-content active" style="margin: auto 0">
        <div class="status-indicator" id="statusIndicator">
          <span id="statusIcon">üéØ</span>
        </div>
        <button class="toggle-btn" id="toggleBtn">Start Producing</button>

        <div class="session-status">
          <div class="session-label">
            <span id="sessionStatusText" class="session-status-text"
              >Focus Inactive</span
            >
          </div>
          <div class="session-timer" id="sessionTimer">00:00:00</div>
        </div>

        <div class="stats" style="grid-template-columns: 1fr 1fr 1fr; gap: 8px">
          <div class="stat-card" style="padding: 8px">
            <div class="stat-number" style="font-size: 16px" id="blockedCount">
              0
            </div>
            <div class="stat-label" style="font-size: 10px">Sites Blocked</div>
          </div>
          <div class="stat-card" style="padding: 8px">
            <div class="stat-number" style="font-size: 16px" id="focusedTime">
              00h00m
            </div>
            <div class="stat-label" style="font-size: 10px">Focus Time</div>
          </div>
          <div class="stat-card" style="padding: 8px">
            <div class="stat-number" style="font-size: 16px" id="breakTime">
              00h00m
            </div>
            <div class="stat-label" style="font-size: 10px">Break Time</div>
          </div>
        </div>
      </div>

      <!-- STATS TAB -->
      <div id="tab-stats" class="tab-content">
        <!-- Main Stats View -->
        <div id="stats-main-view">
          <div class="section">
            <div class="section-title">
              <span>üìä Current Session</span>
              <span
                id="deactivateSessionBtn"
                class="btn btn-danger"
                title="Deactivate Session"
                style="display: none; font-size: 10px; padding: 1px 6px"
              >
                End Session
              </span>
            </div>
            <div
              id="currentSessionStats"
              class="stats"
              style="grid-template-columns: 1fr 1fr 1fr; gap: 8px"
            >
              <div class="stat-card" style="padding: 8px">
                <div
                  class="stat-number"
                  style="font-size: 16px"
                  id="currentSessionFocusTime"
                >
                  00h00m
                </div>
                <div class="stat-label" style="font-size: 10px">Focus Time</div>
              </div>
              <div class="stat-card" style="padding: 8px">
                <div
                  class="stat-number"
                  style="font-size: 16px"
                  id="currentSessionBreakTime"
                >
                  00h00m
                </div>
                <div class="stat-label" style="font-size: 10px">Break Time</div>
              </div>
              <div class="stat-card" style="padding: 8px">
                <div
                  class="stat-number"
                  style="font-size: 16px"
                  id="currentSessionTotalTime"
                >
                  00h00m
                </div>
                <div class="stat-label" style="font-size: 10px">
                  Session Time
                </div>
              </div>
            </div>
            <div
              id="noSessionMessage"
              class="empty-state"
              style="display: none"
            >
              No active session.<br />
              Start or activate a session to see the stats!
            </div>
            <div
              id="currentSessionInfo"
              style="
                display: none;
                margin-top: 8px;
                font-size: 11px;
                text-align: center;
                opacity: 0.8;
              "
            >
              <span>
                <span style="opacity: 0.7">Session: </span>
                <span id="currentSessionName" style="font-weight: 600"
                  >None</span
                >
                <span style="opacity: 0.7"> ‚Ä¢ Rules: </span>
                <span id="currentSessionRules" style="font-weight: 600"
                  >None</span
                >
                <span style="opacity: 0.7"> ‚Ä¢ Sites Blocked: </span>
                <span id="currentSessionBlocksCount" style="font-weight: 600"
                  >0</span
                >
              </span>
            </div>
          </div>

          <div class="section">
            <div class="section-title">üî• Overall Stats</div>
            <div
              class="stats"
              style="grid-template-columns: 1fr 1fr 1fr; gap: 8px"
            >
              <div class="stat-card" style="padding: 8px">
                <div
                  class="stat-number"
                  style="font-size: 16px"
                  id="totalFocusedTime"
                >
                  00h00m
                </div>
                <div class="stat-label" style="font-size: 10px">
                  Avg Focus Time
                </div>
              </div>
              <div class="stat-card" style="padding: 8px">
                <div
                  class="stat-number"
                  style="font-size: 16px"
                  id="statsTabTotalSessions"
                >
                  0
                </div>
                <div class="stat-label" style="font-size: 10px">Sessions</div>
              </div>
              <div class="stat-card" style="padding: 8px">
                <div
                  class="stat-number"
                  style="font-size: 16px"
                  id="totalBlockedCount"
                >
                  0
                </div>
                <div class="stat-label" style="font-size: 10px">
                  Total Blocks
                </div>
              </div>
            </div>
          </div>

          <div class="" style="display: flex; gap: 8px">
            <button
              id="viewSessionHistoryBtn"
              class="btn btn-primary"
              style="width: 100%"
            >
              üïê Session History
            </button>
          </div>
        </div>

        <!-- Session History View (previously separate Sessions tab) -->
        <div id="session-history-view" style="display: none">
          <div
            class="section"
            style="margin-top: 0; margin-bottom: 0; max-height: 310px"
          >
            <div class="section-title">
              <div style="display: flex; gap: 8px; align-items: center">
                <button id="backToStatsBtn" class="btn btn-xsmall btn-squared">
                  <i class="bi bi-arrow-left"></i>
                </button>
                <span>üïê Session History</span>
              </div>
              <button
                id="clearSessionsBtn"
                class="btn btn-xsmall btn-squared btn-danger"
                title="Delete All Sessions"
                style="display: none"
              >
                <i class="bi bi-trash"></i>
              </button>
            </div>
            <div class="scroll-container" style="max-height: 244px">
              <div id="sessionsList">
                <div class="empty-state">
                  No sessions yet.<br />
                  Start focus mode to create your first session!
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- RULES TAB (Merged Rules + Modes) -->
      <div id="tab-rules" class="tab-content">
        <!-- Main view: List of custom rule sets -->
        <div id="rules-main-view">
          <div class="section" style="max-height: 255px">
            <div class="section-title">
              <span>üìã Custom Rules</span>
              <button
                id="clearAllRuleSetsBtn"
                class="btn btn-xsmall btn-danger"
                title="Delete All Custom Rules"
                style="display: none; padding: 1px 6px; font-size: 10px"
              >
                Delete All
              </button>
            </div>
            <div
              id="ruleSetsList"
              class="scroll-container"
              style="max-height: 194px"
            >
              <div class="empty-state">
                No custom rules yet.<br />
                Create one to get started!
              </div>
            </div>
          </div>

          <button
            id="createRuleSetBtn"
            class="btn btn-success"
            style="width: 100%"
          >
            <i class="bi bi-plus-circle"></i> Create New Custom Rules
          </button>
        </div>

        <!-- Edit view: Edit or create a rule set -->
        <div id="rules-edit-view" style="display: none">
          <!-- Rule set name input (only shown when creating new) -->
          <div id="ruleSetNameSection" class="section" style="display: none">
            <div class="section-title" id="ruleSetEditTitle">
              üìù Add Custom Rule
            </div>
            <div class="input-group" style="margin: 0">
              <input
                type="text"
                id="ruleSetNameInput"
                placeholder="Enter rule set name (e.g., Work, Study)"
                style="width: 100%"
              />
            </div>
          </div>

          <!-- Add block rule section -->
          <div class="section">
            <div class="section-title" style="justify-content: initial">
              <button
                id="backToRuleSetListBtn"
                class="btn btn-xsmall btn-squared"
              >
                <i class="bi bi-arrow-left"></i>
              </button>
              <span>üö´ Add Rule</span>
            </div>

            <div class="input-group">
              <select id="ruleType">
                <option selected hidden>Select one option</option>
                <option value="domain">Block Domain</option>
                <option value="url">Block Specific URL</option>
                <option value="allow">Allow Specific URL</option>
                <option value="allowParam">Allow Parameter</option>
              </select>
            </div>

            <div id="urlInputContainer" class="input-group" style="margin: 0">
              <input
                type="text"
                id="urlInput"
                placeholder="e.g., youtube.com, * (block all)"
              />
              <button id="addRule" class="btn" title="Add Rule">Add</button>
            </div>

            <div
              id="paramInputsContainer"
              class="input-group"
              style="margin: 0; display: none"
            >
              <input
                type="text"
                id="paramKeyInput"
                placeholder="Key (e.g., list)"
                style="width: 50%"
              />
              <input
                type="text"
                id="paramValueInput"
                placeholder="Value (optional)"
                style="width: 50%"
              />

              <button id="addParamRule" class="btn">Add</button>
            </div>
          </div>

          <!-- Rules list -->
          <div class="section">
            <div class="section-title">
              <span>üìã Rules (<span id="ruleCount">0</span>)</span>

              <div id="rulesOptionBtn">
                <button
                  id="importRulesBtn"
                  class="btn btn-xsmall btn-squared btn-primary"
                  title="Import Rules"
                >
                  <input
                    type="file"
                    id="importFileInput"
                    accept=".txt"
                    style="display: none"
                  />
                  <i class="bi bi-download"></i>
                </button>
                <button
                  id="exportRulesBtn"
                  class="btn btn-xsmall btn-squared btn-success"
                  title="Export Rules"
                  style="display: none"
                >
                  <i class="bi bi-upload"></i>
                </button>
                <button
                  id="clearRulesBtn"
                  class="btn btn-xsmall btn-squared btn-danger"
                  title="Clear Rules"
                  style="display: none"
                >
                  <i class="bi bi-trash"></i>
                </button>
              </div>
            </div>

            <div class="scroll-container" style="height: 80px">
              <div id="rulesList">
                <div class="empty-state">
                  No blocking rules configured yet.<br />
                  Add or import some rules to get started!
                </div>
              </div>
            </div>
          </div>

          <!-- Footer buttons for creating new rule set (hidden when editing) -->
          <div
            id="ruleSetActionButtons"
            style="display: none; gap: 8px; margin-top: 12px"
          >
            <button
              id="cancelRuleSetBtn"
              class="btn btn-secondary"
              style="flex: 1"
            >
              Cancel
            </button>
            <button id="saveRuleSetBtn" class="btn btn-primary" style="flex: 1">
              Save Custom Rules
            </button>
          </div>
        </div>
      </div>

      <!-- PERSONALIZATION TAB -->
      <div id="tab-personalize" class="tab-content">
        <!-- Main Theme View -->
        <div id="theme-main-view">
          <div class="section">
            <div class="section-title">üé® Theme Colors</div>
            <div class="theme-grid">
              <button
                class="theme-option active"
                data-theme="blue"
                title="Blue (Default)"
              >
                <div
                  class="theme-preview"
                  style="
                    background: linear-gradient(
                      135deg,
                      #667eea 0%,
                      #764ba2 100%
                    );
                  "
                ></div>
                <span>Blue</span>
              </button>
              <button class="theme-option" data-theme="red" title="Red">
                <div
                  class="theme-preview"
                  style="
                    background: linear-gradient(
                      135deg,
                      #e74c3c 0%,
                      #c0392b 100%
                    );
                  "
                ></div>
                <span>Red</span>
              </button>
              <button class="theme-option" data-theme="green" title="Green">
                <div
                  class="theme-preview"
                  style="
                    background: linear-gradient(
                      135deg,
                      #2ecc71 0%,
                      #27ae60 100%
                    );
                  "
                ></div>
                <span>Green</span>
              </button>
              <button class="theme-option" data-theme="orange" title="Orange">
                <div
                  class="theme-preview"
                  style="
                    background: linear-gradient(
                      135deg,
                      #f39c12 0%,
                      #e67e22 100%
                    );
                  "
                ></div>
                <span>Orange</span>
              </button>
              <button class="theme-option" data-theme="purple" title="Purple">
                <div
                  class="theme-preview"
                  style="
                    background: linear-gradient(
                      135deg,
                      #9b59b6 0%,
                      #8e44ad 100%
                    );
                  "
                ></div>
                <span>Purple</span>
              </button>
              <button class="theme-option" data-theme="teal" title="Teal">
                <div
                  class="theme-preview"
                  style="
                    background: linear-gradient(
                      135deg,
                      #1abc9c 0%,
                      #16a085 100%
                    );
                  "
                ></div>
                <span>Teal</span>
              </button>
            </div>
          </div>

          <button
            id="openBlockPageSettingsBtn"
            class="btn btn-primary"
            style="width: 100%"
          >
            üö´ Personalize Block Page <i class="bi bi-arrow-right"></i>
          </button>
        </div>

        <!-- Block Page Settings Sub-page -->
        <div id="block-page-settings-view" style="display: none">
          <div class="section" style="margin-top: 0">
            <div class="section-title">
              <button
                id="backToThemeBtn"
                class="btn btn-xsmall btn-squared"
                title="Back to Theme"
              >
                <i class="bi bi-arrow-left"></i>
              </button>
              <span>üö´ Block Page Settings</span>
            </div>

            <div class="input-group">
              <input
                type="text"
                id="blockPageTitle"
                placeholder="Block page title"
                value="üéØ Stay Focused!"
              />
            </div>

            <div class="input-group" style="margin-bottom: 0">
              <input
                type="text"
                id="blockPageMessage"
                placeholder="Block page message"
                value="This site is blocked during your focus session."
              />
            </div>
          </div>

          <div class="section">
            <div class="section-title">
              <span>üëÅÔ∏è Preview</span>
              <button
                id="resetPersonalizationBtn"
                class="btn btn-xsmall btn-squared btn-danger"
                title="Reset to Defaults"
              >
                <i class="bi bi-arrow-counterclockwise"></i>
              </button>
            </div>
            <div class="block-page-preview" id="blockPagePreview">
              <div class="preview-content">
                <h2 id="previewTitle">üéØ Stay Focused!</h2>
                <p id="previewMessage">
                  This site is blocked during your focus session.
                </p>
              </div>
            </div>
          </div>

          <button
            id="savePersonalizationBtn"
            class="btn btn-success"
            style="width: 100%"
          >
            Save Personalization <i class="bi bi-check-circle"></i>
          </button>
        </div>
      </div>

      <!-- ACCOUNT MANAGEMENT TAB -->
      <div id="tab-account" class="tab-content">
        <div class="section">
          <div class="section-title">üë§ Account</div>
          <div class="empty-state" style="padding: 20px">
            Account management features<br />coming soon!
          </div>
        </div>

        <div class="section">
          <div class="section-title">‚ÑπÔ∏è About Producer</div>
          <div style="text-align: left; font-size: 12px; line-height: 1.6">
            <p style="margin-bottom: 8px"><strong>Version:</strong> 1.0.0</p>
            <p style="margin-bottom: 8px">
              <strong>Description:</strong> A focus mode extension to help you
              stay productive by blocking distracting websites.
            </p>
          </div>
        </div>

        <div class="section">
          <div class="section-title">üîó Links</div>
          <div style="display: flex; flex-direction: column; gap: 8px">
            <button class="btn btn-secondary" style="width: 100%" disabled>
              üìß Support (Coming Soon)
            </button>
            <button class="btn btn-secondary" style="width: 100%" disabled>
              üåü Rate Extension (Coming Soon)
            </button>
            <button class="btn btn-secondary" style="width: 100%" disabled>
              üìñ Documentation (Coming Soon)
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Tab Navigation (Bottom) -->
    <div class="tab-navigation">
      <button class="tab-btn active" data-tab="home">
        <i class="bi bi-house-fill"></i>
        <span>Home</span>
      </button>
      <button class="tab-btn" data-tab="rules">
        <i class="bi bi-shield-fill-exclamation"></i>
        <span>Rules</span>
      </button>
      <button class="tab-btn" data-tab="stats">
        <i class="bi bi-bar-chart-fill"></i>
        <span>Stats</span>
      </button>
      <button class="tab-btn" data-tab="personalize">
        <i class="bi bi-palette-fill"></i>
        <span>Personalize</span>
      </button>
      <button class="tab-btn" data-tab="account">
        <i class="bi bi-person-circle"></i>
        <span>Account</span>
      </button>
    </div>

    <script src="popup.js"></script>
  </body>
</html>
